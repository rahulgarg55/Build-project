var cfg=require("../pbx_config.js"),app=require("express"),fs=require("fs"),pbx_logger=require("../logger/pbx_logger.js"),request=require("request"),dt=require("../common/datetime.js"),logger=new pbx_logger,dateTime=new dt;function pbx_api(){if(!(this instanceof pbx_api))return logger.log("IMP",channel,"api","========================return new api instance NEW====================="),new pbx_api}(module.exports=pbx_api).prototype.getFreeAgent=function(l,e,o,t,g,a,r,i,n,s,c,p){logger.log("IMP",l,"api","Internal Function [getFreeAgent]");dateTime.getAgentDateTime(),SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sme_id: "+e),logger.log("DEB",l,"api","group: "+o),logger.log("DEB",l,"api","alogtype: "+t),logger.log("DEB",l,"api","customerNumber: "+g),logger.log("DEB",l,"api","agent_ignore_list: "+a),logger.log("DEB",l,"api","sme_sticky_algo: "+r),logger.log("DEB",l,"api","assigned_agent_sticky_type: "+i),logger.log("DEB",l,"api","assigned_agent_id: "+n),logger.log("DEB",l,"api","agentAssignedVNAgentID: "+s),logger.log("DEB",l,"api","sessionid: "+c);e=cfg.ivr_api.url+"/"+e+"/getFreeAgent",logger.log("DEB",l,"api","HTML Request: "+e),e={url:e,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:c},json:{group:o,alogtype:t,customer_no:g,sme_sticky_algo:r,agent_ignore_list:a,assigned_lead_agent_id:a,assigned_agent_sticky_type:i,assigned_agent_sticky_id:n,assigned_vn_agent_id:s}};request(e,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","getFreeAgent Error thrown at url call"+e):logger.log("DEB",l,"api","getFreeAgent HTML Received: "+t),p(e,o,t)})},pbx_api.prototype.getFreeAgentParallelRinging=function(l,e,o,t,g,a,r,i,n,s){logger.log("IMP",l,"api","Internal Function [getFreeAgentParallelRinging]");dateTime.getAgentDateTime(),SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sme_id: "+e),logger.log("DEB",l,"api","group: "+o),logger.log("DEB",l,"api","alogtype: "+t),logger.log("DEB",l,"api","customerNumber: "+g),logger.log("DEB",l,"api","agent_ignore_list: "+a),logger.log("DEB",l,"api","sme_sticky_algo: "+r),logger.log("DEB",l,"api","total_agents: "+i),logger.log("DEB",l,"api","sessionid: "+n);e=cfg.ivr_api.url+"/"+e+"/getFreeAgentParallelRinging",logger.log("DEB",l,"api","HTML Request: "+e),e={url:e,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:n},json:{group:o,alogtype:t,customer_no:g,sme_sticky_algo:r,total_agents:i,agent_ignore_list:a}};request(e,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","getFreeAgentParallelRinging Error thrown at url call"+e):logger.log("DEB",l,"api","getFreeAgentParallelRinging HTML Received: "+t),s(e,o,t)})},pbx_api.prototype.setAgentFree=function(l,e,o,t,g,a,r,i){logger.log("IMP",l,"api","Internal Function [setAgentFree]"),logger.log("DEB",l,"api","agent_id: "+e),logger.log("DEB",l,"api","cat_desc: "+o),logger.log("DEB",l,"api","agent_repeatid: "+t),logger.log("DEB",l,"api","flag: "+g),logger.log("DEB",l,"api","alogtype: "+a),logger.log("DEB",l,"api","sessionid: "+r);o=cfg.ivr_api.url+"/"+e+"/setAgentFree",logger.log("DEB",l,"api","HTML Request: "+o),t={url:o,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:r},json:{}};request(t,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","setAgentFree Error thrown at url call"+e):logger.log("DEB",l,"api","setAgentFree HTML Received: "+t),i(e,o,t)})},pbx_api.prototype.checkAgentStatus=function(l,e,o,t,g,a,r,i,n){logger.log("IMP",l,"api","Internal Function [checkAgentStatus]"),logger.log("DEB",l,"api","agent_id: "+e),logger.log("DEB",l,"api","cat_desc: "+o),logger.log("DEB",l,"api","agent_repeatid: "+t),logger.log("DEB",l,"api","flag: "+g),logger.log("DEB",l,"api","alogtype: "+a),logger.log("DEB",l,"api","sessionid: "+i);i=cfg.server.protocol+"://"+cfg.server.ip+":"+cfg.server.port+"/"+cfg.server.services_name+"/getAgentDetails?smeid="+e+"&catdesc="+o+"&agentrepeatid="+t+"&flag="+g+"&alogtype="+a+"&customerNumber="+r,logger.log("DEB",l,"api","HTML Request: "+i),e={url:i,headers:{"User-Agent":"request"}};request(e,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","checkAgentStatus Error thrown at url call"+e):logger.log("DEB",l,"api","checkAgentStatus HTML Received: "+t),n(e,o,t)})},pbx_api.prototype.logCallCdr=function(l,e,o,t,g,a,r,i,n,s,c,p,d,u,D,E,m,T,B,f,S,_,k,v,R,I,C,h,y,M,A,F,b,L){logger.log("IMP",l,"api","Internal Function [logCallCdr]"),logger.log("DEB",l,"api","sessionid: "+b);b=cfg.server.protocol+"://"+cfg.server.ip+":"+cfg.server.port+"/"+cfg.server.services_name+"/setIvrCdr?agentGroup="+e+"&callDirection="+o+"&callDirectionStatus="+t+"&callRecordedFile="+g+"&callRecordingStatus="+a+"&calledNumber="+r+"&callingNumber="+i+"&cdrMode="+n+"&channelNo="+s+"&duration="+c+"&endDateTime="+p+"&hlr="+d+"&insertDateTime="+u+"&longcode="+D+"&masterShortcode="+E+"&patchedAgentId="+m+"&serverIpAddress="+T+"&shortcodeMapping="+B+"&smeId="+f+"&smeIdentifier="+S+"&startDateTime="+_+"&voicemailRecordingFile="+k+"&voicemailRecordingStatus="+v+"&groupid="+R+"&callid="+I+"&cdrFlag="+C+"&answerFlag="+h+"&callStatus="+y+"&disconnectedBy="+M+"&customerName="+A+"&addressBookId="+F,logger.log("DEB",l,"api","HTML Request: "+b),e={url:b,headers:{"User-Agent":"request"}};request(e,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","logCallCdr Error thrown at url call"+e):logger.log("DEB",l,"api","logCallCdr HTML Received: "+t),L(e,o,t)})},pbx_api.prototype.logCallCdrNew=function(l,e,o,t,g,a,r,i,n,s,c,p,d,u,D,E,m,T,B,f,S,_,k,v,R,I,N,C,h,y,j,H,M,A,F,b,L,P,q,x,w,O,U,G,V,K){logger.log("IMP",l,"api","Internal Function [logCallCdrNew]");var W=dateTime.getAgentDateTime(),u=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","addressBookId: "+F),logger.log("DEB",l,"api","agentGroup: "+e),logger.log("DEB",l,"api","answer: "+C),logger.log("DEB",l,"api","callDirection: "+o),logger.log("DEB",l,"api","callDirectionStatus: "+t),logger.log("DEB",l,"api","callSessionId: "+I),logger.log("DEB",l,"api","callRecordedFile: "+g),logger.log("DEB",l,"api","callRecordingStatus: "+a),logger.log("DEB",l,"api","callStatus: "+h),logger.log("DEB",l,"api","agentNumber: "+r),logger.log("DEB",l,"api","customerNumber: "+i),logger.log("DEB",l,"api","cdrMode: "+n),logger.log("DEB",l,"api","callModeNew: "+x),logger.log("DEB",l,"api","channelNo: "+s),logger.log("DEB",l,"api","CustomerConnectedDuration: "+A),logger.log("DEB",l,"api","CustomerRingingDuration: "+M),logger.log("DEB",l,"api","duration: "+c),logger.log("DEB",l,"api","disconnectedBy: "+y),logger.log("DEB",l,"api","callendDateTime: "+p),logger.log("DEB",l,"api","endDateTimeS: "+p),logger.log("DEB",l,"api","groupid: "+R),logger.log("DEB",l,"api","hlr: "+d),logger.log("DEB",l,"api","insertDateTime: "+u),logger.log("DEB",l,"api","insertDateTimeS: "+u),logger.log("DEB",l,"api","longcode: "+D),logger.log("DEB",l,"api","masterShortcode: "+E),logger.log("DEB",l,"api","patchedAgentId: "+m),logger.log("DEB",l,"api","serverIpAddress: "+T),logger.log("DEB",l,"api","shortcodeMapping: "+B),logger.log("DEB",l,"api","smeId: "+f),logger.log("DEB",l,"api","smeIdentifier: "+S),logger.log("DEB",l,"api","startDateTime: "+_),logger.log("DEB",l,"api","startDateTimeS: "+_),logger.log("DEB",l,"api","voicemailRecordingFile: "+k),logger.log("DEB",l,"api","voicemailRecordingStatus: "+v),logger.log("DEB",l,"api","callMode: "+b),logger.log("DEB",l,"api","endCallDescription: "+L),logger.log("DEB",l,"api","IvrCallDuration: "+P),logger.log("DEB",l,"api","callBlackListCustomerFlag: "+q),logger.log("DEB",l,"api","callFlowId: "+w),logger.log("DEB",l,"api","gflowName: "+O),logger.log("DEB",l,"api","endCallProvisionalFlag: "+U),logger.log("DEB",l,"api","finalDTMF: "+G),logger.log("DEB",l,"api","sessionid: "+V),cfg.ivr_api.url+"/"+f+"/endCallCdr"),u=(logger.log("DEB",l,"api","HTML Request: "+u),{url:u,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:V},json:{addressBookId:F,agentGroup:e,answer:C,callDirection:o,callDirectionStatus:t,session_id:I,callRecordedFile:g,callRecordingStatus:a,callStatus:h,merge_status:"0",remarks:"",agentNumber:r,customerNumber:i,cdrMode:n,channelNo:s,connectedDuration:A,customerName:"0",disconnectedBy:y,duration:c,endDateTime:p,insertDateTime:W,startDateTime:_,groupId:R,hlr:d,id:"0",longcode:D,masterShortcode:E,patchedAgentId:m,ringingDuration:M,serverIpAddress:T,shortcodeMapping:B,smeId:f,smeIdentifier:S,voicemailRecordingFile:k,voicemailRecordingStatus:v,callMode:b,callType:b,callModeDb:x,ivrDuration:P,callDescription:L,customerStatus:q,callflowId:w,callflowName:O,provisionalFlag:U,finalDTMF:G}});request(u,function(e,o,t){(e||200!=o.statusCode)&&logger.log("ERR",l,"api","logCallCdrNew Error thrown at url call"+e),K(e,o,t)})},pbx_api.prototype.notifyAutodialer=function(l,e,o,g){logger.log("IMP",l,"api","Internal Function [notifyAutodialer]"),logger.log("DEB",l,"api","callScheduleId: "+e),logger.log("DEB",l,"api","sessionid: "+o);o=cfg.server.crm_api_protocol+"://"+cfg.server.crm_api_ip+":"+cfg.server.crm_api_port+"/crm/api/v1/initaile/call/schedule/"+e+"/callback/",logger.log("DEB",l,"api","HTML Request: "+o),e={url:o,headers:{Accept:"*/*"}};request(e,function(e,o,t){(e||200!=o.statusCode)&&logger.log("ERR",l,"api","Error thrown at url call"+e),g(e,o,t)})},pbx_api.prototype.pushLiveEvent=function(l,e,o,t,g,a,r,i,n,s,c,p,d,u,D,E){logger.log("IMP",l,"api","Internal Function [pushLiveEvent]");var m=r.getAgentDateTime(),T=(SecretToken=r.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","accountSid("+e+")"),logger.log("DEB",l,"api","agentNumber("+o+")"),logger.log("DEB",l,"api","callMode("+t+")"),logger.log("DEB",l,"api","callType("+g+")"),logger.log("DEB",l,"api","customDtmf("+a+")"),logger.log("DEB",l,"api","dateTime("+r+")"),logger.log("DEB",l,"api","from("+i+")"),logger.log("DEB",l,"api","liveEvent("+n+")"),logger.log("DEB",l,"api","recordingFile("+s+")"),logger.log("DEB",l,"api","responseMsg("+c+")"),logger.log("DEB",l,"api","sessionId("+p+")"),logger.log("DEB",l,"api","smeId("+d+")"),logger.log("DEB",l,"api","to("+u+")"),logger.log("DEB",l,"api","sessionid: "+D),cfg.server.crm_api_protocol+"://"+cfg.server.crm_api_ip+":"+cfg.server.crm_api_port+"/crm/api/v1/call/event/callback"),T=(logger.log("DEB",l,"api","HTML Request: "+T),{url:T,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:D},json:{accountSid:""+e,agentNumber:""+o,callMode:t,callType:g,customDtmf:""+a,dateTime:""+r,from:""+i,liveEvent:""+n,recordingFile:s,responseMsg:""+c,sessionId:""+p,smeId:""+d,insertDateTime:m,to:""+u}});request(T,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","Error thrown at url call"+e):(logger.log("DEB",l,"api","pushLiveEvent response: "+o),logger.log("DEB",l,"api","pushLiveEvent html: "+t)),E(e,o,t)})},pbx_api.prototype.updateUniqueCallDetails=function(l,e,o,t,g,a,r,i,n,s,c,p,d,u,D,E,m,T,B,f,S,_,k,v,R,I,C,h,y,M,A,F,b,L,P,N){logger.log("IMP",l,"api","Internal Function [updateUniqueCallDetails]");var j=dateTime.getAgentDateTime(),q=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+P),cfg.ivr_api.url+"/"+f+"/setUniqueCalls"),q=(logger.log("DEB",l,"api","HTML Request: "+q),{url:q,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:P},json:{channel:l,callpatchedAgentGroup:e,callDirection:o,callDirectionStatus:t,callRecordedFile:g,callRecordingStatus:a,customerNumber:i,agentNumber:r,callcdrMode:n,callModeDb:b,callchannelNo:s,callDuration:c,callendDateTime:p,callHlr:d,callinsertDateTime:u,calllongcode:D,callmasterShortcode:E,callpatchedAgentId:m,ip:T,callshortcodeMapping:B,smeID:f,callsmeIdentifier:S,callstartDateTime:_,voicemailRecordingFile:k,voicemailRecordingStatus:v,callgroupid:R,callSessionId:I,callcdrFlag:C,callanswerFlag:h,callfinalStatus:y,calldisconnectedBy:M,addressBookName:A,addressBookId:F,endCallProvisionalFlag:L,insertDateTime:j}});request(q,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","updateUniqueCallDetails Error thrown at url call"+e):logger.log("DEB",l,"api","updateUniqueCallDetails HTML Received: "+t),N(e,o,t)})},pbx_api.prototype.funFetchCallProfile=function(l,e,o,t,g,a){logger.log("IMP",l,"api","Internal Function [funFetchCallProfile]");var r=dateTime.getAgentDateTime(),i=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","timeout ("+cfg.ivr_api.timeout+")"),logger.log("DEB",l,"api","sessionid: "+g),cfg.ivr_api.url+"/fetchCallProfile"),i=(logger.log("DEB",l,"api","HTML Request: "+i),{url:i,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:g},json:{callingNumber:e,longcode:o,insertDateTime:r,ipAddress:t}});request(i,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funFetchCallProfile Error thrown at url call"+e):logger.log("DEB",l,"api","funFetchCallProfile HTML Received: "+t),a(e,o,t)})},pbx_api.prototype.funSetLiveCalls=function(l,e,o,t,g,a,r,i,n,s,c,p,d){logger.log("IMP",l,"api","Internal Function [funSetLiveCalls]");var u=dateTime.getAgentDateTime(),n=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+p),cfg.ivr_api.url_live_calls+"/"+n+"/setLiveCalls"),n=(logger.log("DEB",l,"api","HTML Request: "+n),{url:n,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:p},json:{date_time:e,longcode:o,customer_number:g,agent_number:a,self_ip:s,agent_id:r,session_id:t,call_status:i,address_book_id:0,customer_name:"",insertDateTime:u,call_type:c}});request(n,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funSetLiveCalls Error thrown at url call"+e):logger.log("DEB",l,"api","funSetLiveCalls HTML Received: "+t),d(e,o,t)})},pbx_api.prototype.funUpdateLiveCalls=function(l,e,o,t,g,a,r,i,n,s,c,p,d){logger.log("IMP",l,"api","Internal Function [funUpdateLiveCalls]"),logger.log("DEB",l,"api","callStatus("+a+")");var u=dateTime.getAgentDateTime(),r=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+i),cfg.ivr_api.url_live_calls+"/"+r+"/updateLiveCalls"),r=(logger.log("DEB",l,"api","HTML Request: "+r),{url:r,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:i},json:{customer_number:o,agent_number:t,agent_id:g,session_id:e,call_status:a,insertDateTime:u,date_time:n,longcode:s,self_ip:c,address_book_id:0,customer_name:"",call_type:p}});request(r,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funUpdateLiveCalls Error thrown at url call"+e):logger.log("DEB",l,"api","funUpdateLiveCalls HTML Received: "+t),d(e,o,t)})},pbx_api.prototype.funDeleteLiveCalls=function(l,e,o,t,g){logger.log("IMP",l,"api","Internal Function [funDeleteLiveCalls]");var a=dateTime.getAgentDateTime(),r=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+t),cfg.ivr_api.url_live_calls+"/"+o+"/deleteLiveCalls"),r=(logger.log("DEB",l,"api","HTML Request: "+r),{url:r,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:t},json:{session_id:e,sme_id:o,insertDateTime:a}});request(r,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funDeleteLiveCalls Error thrown at url call"+e):logger.log("DEB",l,"api","funDeleteLiveCalls HTML Received: "+t),g(e,o,t)})},pbx_api.prototype.funUploadRecording=function(l,e,o,t,g,a,r,i,n,s,c,p,d,u,D,E){logger.log("IMP",l,"api","Internal Function [funUploadRecording]");var m=dateTime.getAgentDateTime(),t=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+D),cfg.ivr_api.url+"/"+t+"/uploadRecording?in_flag="+e+"&in_call_id="+o+"&in_agent_id="+g+"&in_customer_ani="+a+"&in_duration="+(r=0==r?"0":r)+"&in_filename="+i+"&in_status="+n+"&in_flag_tbl="+s+"&in_ip="+c+"&insertDateTime="+m+"&session_id="+d+"&call_direction="+u),m=(logger.log("DEB",l,"api","URL: "+t),logger.log("DEB",l,"api","FilePath: "+p),logger.log("DEB",l,"api","AgentFlag: "+e),logger.log("DEB",l,"api","callRecordedFileRaw: "+o),logger.log("DEB",l,"api","idealAgentID: "+g),logger.log("DEB",l,"api","customerNumber: "+a),logger.log("DEB",l,"api","AgentCallDuration: "+r),logger.log("DEB",l,"api","RecordingFile: "+i),logger.log("DEB",l,"api","RecStatus: "+n),logger.log("DEB",l,"api","InsertFlag: "+s),logger.log("DEB",l,"api","self_ip: "+c),logger.log("DEB",l,"api","callSessionId: "+d),logger.log("DEB",l,"api","call_direction: "+u),logger.log("DEB",l,"api","sessionid: "+D),{url:t,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"Content-Type":"multipart/form-data",token:SecretToken,sessionId:D},formData:{kservice_file:{value:fs.createReadStream(p),options:{filename:"",contentType:null}}}});request(m,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funSaveRecording Error thrown at url call"+e):logger.log("DEB",l,"api","funSaveRecording HTML Received: "+t),E(e,o,t)})},pbx_api.prototype.funSaveRecordingData=function(l,e,o,t,g,a,r,i,n,s,c,p,d,u,D,E){logger.log("IMP",l,"api","Internal Function [funSaveRecordingData]");var m=dateTime.getAgentDateTime(),t=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),0==r&&(r="0"),cfg.ivr_api.url+"/"+t+"/saveRecordingData"),p=(logger.log("DEB",l,"api","URL: "+t),logger.log("DEB",l,"api","FilePath: "+p),logger.log("DEB",l,"api","AgentFlag: "+e),logger.log("DEB",l,"api","callRecordedFileRaw: "+o),logger.log("DEB",l,"api","idealAgentID: "+g),logger.log("DEB",l,"api","customerNumber: "+a),logger.log("DEB",l,"api","AgentCallDuration: "+r),logger.log("DEB",l,"api","RecordingFile: "+i),logger.log("DEB",l,"api","RecStatus: "+n),logger.log("DEB",l,"api","InsertFlag: "+s),logger.log("DEB",l,"api","self_ip: "+c),logger.log("DEB",l,"api","callSessionId: "+d),logger.log("DEB",l,"api","call_direction: "+u),logger.log("DEB",l,"api","sessionid: "+D),{url:t,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:D},json:{in_flag:e,in_call_id:o,in_agent_id:g,in_customer_ani:a,in_duration:r,in_filename:i,in_status:n,in_flag_tbl:s,in_ip:c,insertDateTime:m,session_id:d,call_direction:u}});request(p,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funSaveRecordingData Error thrown at url call"+e):logger.log("DEB",l,"api","funSaveRecordingData HTML Received: "+t),E(e,o,t)})},pbx_api.prototype.funSaveFailedRecordingData=function(l,e,o,t,g,a,r,i,n,s,c,p,d,u,D,E){logger.log("IMP",l,"api","Internal Function [funSaveFailedRecordingData]");var m=dateTime.getAgentDateTime(),t=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),0==r&&(r="0"),cfg.ivr_api.url+"/"+t+"/saveFailedRecordingInfo"),p=(logger.log("DEB",l,"api","URL: "+t),logger.log("DEB",l,"api","FilePath: "+p),logger.log("DEB",l,"api","AgentFlag: "+e),logger.log("DEB",l,"api","callRecordedFileRaw: "+o),logger.log("DEB",l,"api","idealAgentID: "+g),logger.log("DEB",l,"api","customerNumber: "+a),logger.log("DEB",l,"api","AgentCallDuration: "+r),logger.log("DEB",l,"api","RecordingFile: "+i),logger.log("DEB",l,"api","RecStatus: "+n),logger.log("DEB",l,"api","InsertFlag: "+s),logger.log("DEB",l,"api","self_ip: "+c),logger.log("DEB",l,"api","callSessionId: "+d),logger.log("DEB",l,"api","call_direction: "+u),logger.log("DEB",l,"api","sessionid: "+D),{url:t,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:D},json:{in_flag:e,in_call_id:o,in_agent_id:g,in_customer_ani:a,in_duration:r,in_filename:i,in_status:n,in_flag_tbl:s,in_ip:c,insertDateTime:m,in_session_id:d,call_direction:u}});request(p,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funSaveFailedRecordingData Error thrown at url call"+e):logger.log("DEB",l,"api","funSaveFailedRecordingData HTML Received: "+t),E(e,o,t)})},pbx_api.prototype.funSetAgentCdr=function(l,e,o,t,g,a,r,i,n,s,c,p,d,u,D,E,m,T,B,f,S){logger.log("IMP",l,"api","Internal Function [funSetAgentCdr]");var _=dateTime.getAgentDateTime(),o=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),cfg.ivr_api.url+"/"+o+"/setAgentCdr"),o=(logger.log("DEB",l,"api","HTML Request: "+o),logger.log("DEB",l,"api","inflag: "+e),logger.log("DEB",l,"api","agentgroup: "+s),logger.log("DEB",l,"api","agentId: "+t),logger.log("DEB",l,"api","groupId: "+s),logger.log("DEB",l,"api","status: "+g),logger.log("DEB",l,"api","responseCode: "+a),logger.log("DEB",l,"api","duration: "+n),logger.log("DEB",l,"api","endDate: "+i),logger.log("DEB",l,"api","startDate: "+r),logger.log("DEB",l,"api","customerAni: "+c),logger.log("DEB",l,"api","sessionCall: "+p),logger.log("DEB",l,"api","mode: "+d),logger.log("DEB",l,"api","callInfo: "+u),logger.log("DEB",l,"api","connectedDuration: "+E),logger.log("DEB",l,"api","ringingDuration: "+D),logger.log("DEB",l,"api","insertDateTime: "+_),logger.log("DEB",l,"api","callRouteReason: "+m),logger.log("DEB",l,"api","overallCallStatus: "+T),logger.log("DEB",l,"api","agentNumber: "+B),logger.log("DEB",l,"api","sessionid: "+f),{url:o,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:f},json:{inflag:e,agentgroup:s,agentId:t,groupId:s,status:g,responseCode:a,duration:n,endDate:i,startDate:r,customerAni:c,sessionCall:p,mode:d,callInfo:u,connectedDuration:E,ringingDuration:D,callRouteReason:m,overallCallStatus:T,insertDateTime:_,agentNumber:B}});request(o,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funSetAgentCdr Error thrown at url call err("+e+"), response("+o+"), html("+t+")"):logger.log("DEB",l,"api","funSetAgentCdr HTML Received: "+t),S(e,o,t)})},pbx_api.prototype.funGetAppOutCallDetail=function(l,e,o,t,g,a){logger.log("IMP",l,"api","Internal Function [funGetAppOutCallDetail]");var r=dateTime.getAgentDateTime(),e=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+g),cfg.ivr_api.url+"/"+e+"/getAppOutCallDetail"),e=(logger.log("DEB",l,"api","HTML Request: "+e),logger.log("DEB",l,"api","agent_no: "+o),logger.log("DEB",l,"api","longcode: "+t),logger.log("DEB",l,"api","insertDateTime: "+r),{url:e,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:g},json:{agent_no:o,longcode:t,insertDateTime:r}});request(e,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funGetAppOutCallDetail Error thrown at url call"+e):logger.log("DEB",l,"api","funGetAppOutCallDetail HTML Received: "+t),a(e,o,t)})},pbx_api.prototype.checkValidAgentExt=function(l,e,o,t,g){logger.log("IMP",l,"api","Internal Function [checkValidAgentExt]");var a=dateTime.getAgentDateTime(),r=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+t),cfg.ivr_api.url+"/"+e+"/agentExtention"),e=(logger.log("DEB",l,"api","HTML Request: "+r),logger.log("DEB",l,"api","smeID: "+e),logger.log("DEB",l,"api","agentExt: "+o),logger.log("DEB",l,"api","insertDateTime: "+a),{url:r,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:t},json:{in_agent_ext:o,insertDateTime:a}});request(e,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","checkValidAgentExt Error thrown at url call"+e):logger.log("DEB",l,"api","checkValidAgentExt HTML Received: "+t),g(e,o,t)})},pbx_api.prototype.checkKeepAlive=function(l,e,g){logger.log("IMP",l,"api","Internal Function [checkKeepAlive]");var o=dateTime.getAgentDateTime(),t=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+e),cfg.ivr_api.url+"/keepAlive"),t=(logger.log("DEB",l,"api","HTML Request: "+t),logger.log("DEB",l,"api","dateTime: "+o),{url:t,method:"POST",timeout:cfg.ivr_api.timeout,headers:{"content-type":"application/json",token:SecretToken,sessionId:e},json:{dateTime:o}});request(t,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","checkKeepAlive Error thrown at url call"+e):logger.log("DEB",l,"api","checkKeepAliveHTML Received: "+t),g(e,o,t)})},pbx_api.prototype.notifyCustomerCrmDialer=function(l,e,o,t,g,a){logger.log("IMP",l,"api","Internal Function [notifyCustomerCrmDialer]"),SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+g);e=cfg.crm_api.url+"/"+e+"/schedule/sendIvrOutgoingcallback",logger.log("DEB",l,"api","HTML Request: "+e),e={url:e,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:g},json:{callScheduleId:o,sessionId:t}};request(e,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","notifyCustomerCrmDialer Error thrown at url call"+e):logger.log("DEB",l,"api","notifyCustomerCrmDialer HTML Received: "+t),a(e,o,t)})},pbx_api.prototype.funcNotifyCrmIncomingCallsApi=function(l,e,o,t,g,a,r,i,n,s,c,p,d,u,D,E,m,T,B,f,S,_,k){logger.log("IMP",l,"api","Internal Function [funcNotifyCrmIncomingCallsApi]"),logger.log("DEB",l,"api","Inside notifyAutodialer"),logger.log("DEB",l,"api","event_name("+e+")"),logger.log("DEB",l,"api","crm_partner("+o+")"),logger.log("DEB",l,"api","sme_id("+t+")"),logger.log("DEB",l,"api","account_sid("+g+")"),logger.log("DEB",l,"api","session_id("+a+")"),logger.log("DEB",l,"api","recording_file_id("+r+")"),logger.log("DEB",l,"api","recording_file_url("+i+")"),logger.log("DEB",l,"api","agent_no("+n+")"),logger.log("DEB",l,"api","customer_no("+s+")"),logger.log("DEB",l,"api","longcode("+c+")"),logger.log("DEB",l,"api","start_datetime("+p+")"),logger.log("DEB",l,"api","end_datetime("+d+")"),logger.log("DEB",l,"api","call_type("+u+")"),logger.log("DEB",l,"api","call_mode("+D+")"),logger.log("DEB",l,"api","call_status("+E+")"),logger.log("DEB",l,"api","call_duration("+m+")"),logger.log("DEB",l,"api","custom_dtmf("+T+")"),logger.log("DEB",l,"api","optional_field("+B+")"),logger.log("DEB",l,"api","response_msg("+f+")"),logger.log("DEB",l,"api","kommSessionId("+S+")"),logger.log("DEB",l,"api","connectedAgentNumber("+_+")"),logger.log("DEB",l,"api","sessionid: "+k),SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")");o=cfg.crm_api.url+"/"+t+"/schedule/sendIvrLiveEvent",logger.log("DEB",l,"api","HTML Request: "+o),r={url:o,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:k},json:{liveEvent:e,accountSid:g,sessionId:a,to:c,from:s,dateTime:p,customDtmf:T,recordingFile:i,responseMsg:f,agentNumber:n,callMode:D,callType:u,kommSessionId:S,call_status:E,call_duration:m,startTime:p,endTime:d,connectedAgentNumber:_}};request(r,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funcNotifyCrmIncomingCallsApi Error thrown at url call"+e):logger.log("DEB",l,"api","funcNotifyCrmIncomingCallsApi HTML Received: "+t)})},pbx_api.prototype.funcNotifyCrmIvrRecordingEvent=function(l,e,o,t,g,a,r,i,n,s,c,p,d,u,D,E,m,T,B,f,S,_,k){logger.log("IMP",l,"api","Internal Function [funcNotifyCrmIvrRecordingEvent]"),logger.log("DEB",l,"api","Inside notifyAutodialer"),logger.log("DEB",l,"api","event_name("+e+")"),logger.log("DEB",l,"api","crm_partner("+o+")"),logger.log("DEB",l,"api","sme_id("+t+")"),logger.log("DEB",l,"api","account_sid("+g+")"),logger.log("DEB",l,"api","session_id("+a+")"),logger.log("DEB",l,"api","recordingId("+_+")"),logger.log("DEB",l,"api","recording_file_url("+i+")"),logger.log("DEB",l,"api","agent_no("+n+")"),logger.log("DEB",l,"api","customer_no("+s+")"),logger.log("DEB",l,"api","longcode("+c+")"),logger.log("DEB",l,"api","start_datetime("+p+")"),logger.log("DEB",l,"api","end_datetime("+d+")"),logger.log("DEB",l,"api","call_type("+u+")"),logger.log("DEB",l,"api","call_mode("+D+")"),logger.log("DEB",l,"api","call_status("+E+")"),logger.log("DEB",l,"api","call_duration("+m+")"),logger.log("DEB",l,"api","custom_dtmf("+T+")"),logger.log("DEB",l,"api","optional_field("+B+")"),logger.log("DEB",l,"api","response_msg("+f+")"),logger.log("DEB",l,"api","kommSessionId("+S+")"),logger.log("DEB",l,"api","sessionid: "+k),SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")");o=cfg.crm_api.url+"/"+t+"/schedule/sendIvrRecordingEvent",logger.log("DEB",l,"api","HTML Request: "+o),d={url:o,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:k},json:{liveEvent:e,accountSid:g,sessionId:a,to:c,from:s,dateTime:p,customDtmf:T,recordingFile:i,recordingId:_,responseMsg:f,agentNumber:n,callMode:D,callType:u,kommSessionId:S}};request(d,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funcNotifyCrmIvrRecordingEvent Error thrown at url call"+e):logger.log("DEB",l,"api","funcNotifyCrmIvrRecordingEvent HTML Received: "+t)})},pbx_api.prototype.sendEndCallNotification=function(l,e,o,t,g,a,r,i,n,s){logger.log("IMP",l,"api","Internal Function [sendEndCallNotification]");var c=dateTime.getAgentDateTime(),o=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+n),cfg.ivr_api.url+"/"+o+"/callEndIvrNotify"),o=(logger.log("DEB",l,"api","HTML Request: "+o),{url:o,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:n},json:{callType:e,sessionId:t,agentId:g,customerName:a,customerNumber:r,mode:i,dateTime:c}});request(o,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","sendEndCallNotification Error thrown at url call"+e):logger.log("DEB",l,"api","sendEndCallNotification sent successfully "+t)})},pbx_api.prototype.sendEndCallSMS=function(l,e,o,t,g,a,r,i,n,s){logger.log("IMP",l,"api","Internal Function [sendEndCallSMS]");var c=dateTime.getAgentDateTime(),o=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","callType("+e+")"),logger.log("DEB",l,"api","smeId("+o+")"),logger.log("DEB",l,"api","callStatus("+t+")"),logger.log("DEB",l,"api","customerNo("+g+")"),logger.log("DEB",l,"api","agentName("+r+")"),logger.log("DEB",l,"api","agentNo("+a+")"),logger.log("DEB",l,"api","duration("+i+")"),logger.log("DEB",l,"api","sessionid: "+n),cfg.ivr_api.url+"/"+o+"/sendEndcallSms"),o=(logger.log("DEB",l,"api","HTML Request: "+o),{url:o,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:n},json:{callType:e,callStatus:t,customerNo:g,agentNo:a,agentName:r,duration:i,dateTime:c}});request(o,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","sendEndCallSMS Error thrown at url call"+e):logger.log("DEB",l,"api","sendEndCallSMS sent successfully "+t)})},pbx_api.prototype.sendEndCallSmsExternal=function(l,e,o,t,g,a,r,i,n,s){logger.log("IMP",l,"api","Internal Function [sendEndCallSmsExternal]");var c=dateTime.getAgentDateTime(),o=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","callType("+e+")"),logger.log("DEB",l,"api","smeId("+o+")"),logger.log("DEB",l,"api","callStatus("+t+")"),logger.log("DEB",l,"api","customerNo("+g+")"),logger.log("DEB",l,"api","agentName("+r+")"),logger.log("DEB",l,"api","agentNo("+a+")"),logger.log("DEB",l,"api","duration("+i+")"),logger.log("DEB",l,"api","sessionid: "+n),cfg.thirdParty_sms_api.url+"/"+o+"/sendThirdPartyEndcallSms"),o=(logger.log("DEB",l,"api","HTML Request: "+o),{url:o,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:n},json:{callType:e,callStatus:t,customerNo:g,agentNo:a,agentName:r,duration:i,dateTime:c}});request(o,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","sendEndCallSmsExternal Error thrown at url call"+e):logger.log("DEB",l,"api","sendEndCallSmsExternal sent successfully "+t)})},pbx_api.prototype.funSetAgentBusy=function(l,e,o,t,g){logger.log("IMP",l,"api","Internal Function [funSetAgentBusy]");var a=dateTime.getAgentDateTime(),o=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+t),cfg.ivr_api.url+"/"+o+"/setAgentOutInfo"),o=(logger.log("DEB",l,"api","HTML Request: "+o),{url:o,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:t},json:{agentNumber:e,insertDateTime:a}});request(o,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funSetAgentBusy Error thrown at url call"+e):(console.log("html.status: "+t.status),console.log("html.message: "+t.message),logger.log("DEB",l,"api","funSetAgentBusy HTML Received: "+t)),g(e,o,t)})},pbx_api.prototype.funSetCustomerCdr=function(l,e,o,t,g,a,r,i,n,s,c,p,d,u,D,E,m){logger.log("IMP",l,"api","Internal Function [funSetCustomerCdr]");var T=dateTime.getAgentDateTime(),o=(SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+E),cfg.ivr_api.url+"/"+o+"/setCustomerCdr"),o=(logger.log("DEB",l,"api","HTML Request: "+o),{url:o,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:E},json:{inflag:e,status:t,responseCode:g,endDate:r,startDate:a,customerAni:n,sessionCall:s,mode:c,callInfo:p,connectedDuration:u,ringingDuration:d,totalDuration:i,callRouteReason:D,insertDateTime:T}});request(o,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","funSetCustomerCdr Error thrown at url call"+e):logger.log("DEB",l,"api","funSetCustomerCdr HTML Received: "+t),m(e,o,t)})},pbx_api.prototype.updateCallBalance=function(l,e,o,t,g,a){logger.log("IMP",l,"api","Internal Function [updateCallBalance]");dateTime.getAgentDateTime(),SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+g);t=cfg.ivr_api.url+"/"+t+"/updateCallBalance",logger.log("DEB",l,"api","HTML Request: "+t),t={url:t,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:g},json:{callDuration:e,calls_type:o}};request(t,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","updateCallBalance Error thrown at url call"+e):(console.log("html.status: "+t.status),console.log("html.message: "+t.message),logger.log("DEB",l,"api","updateCallBalance HTML Received: "+t)),a(e,o,t)})},pbx_api.prototype.aiBotCallStart=function(l,e,o,t,g,a,r,i,n){logger.log("IMP",l,"api","Internal Function [aiBotCallStart]");dateTime.getAgentDateTime(),SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+t);o=cfg.aibot_api.url+"/"+o+"/aiBotCallStart",logger.log("DEB",l,"api","HTML Request: "+o),o={url:o,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:t},json:{callType:e,sessionId:t,eventType:"start",customerName:g,calledNumber:r,callingNumber:a,fileUrl:i}};request(o,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","aiBotCallStart Error thrown at url call"+e):(console.log("html.status: "+t.status),console.log("html.message: "+t.message),logger.log("DEB",l,"api","aiBotCallStart HTML Received: "+t)),n(e,o,t)})},pbx_api.prototype.aiBotStartMedia=function(l,e,o,t,g,a){logger.log("IMP",l,"api","Internal Function [aiBotStartMedia]");dateTime.getAgentDateTime(),SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+t);o=cfg.aibot_api.url+"/"+o+"/aiBotSendMedia",logger.log("DEB",l,"api","HTML Request: "+o),o={url:o,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:t},json:{callType:e,sessionId:t,eventType:"media",fileUrl:g}};request(o,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","aiBotStartMedia Error thrown at url call"+e):(console.log("html.status: "+t.status),console.log("html.message: "+t.message),logger.log("DEB",l,"api","aiBotStartMedia HTML Received: "+t)),a(e,o,t)})},pbx_api.prototype.aiBotCallStop=function(l,e,o,t,g,a){logger.log("IMP",l,"api","Internal Function [aiBotCallStop]");dateTime.getAgentDateTime(),SecretToken=dateTime.generateSecretToken(cfg.secret.days),logger.log("DEB",l,"api","SecretToken ("+SecretToken+")"),logger.log("DEB",l,"api","sessionid: "+t);o=cfg.aibot_api.url+"/"+o+"/aiBotCallStop",logger.log("DEB",l,"api","HTML Request: "+o),o={url:o,method:"POST",headers:{"content-type":"application/json",token:SecretToken,sessionId:t},json:{callType:e,sessionId:t,eventType:"stop",fileUrl:g}};request(o,function(e,o,t){e||200!=o.statusCode?logger.log("ERR",l,"api","aiBotCallStop Error thrown at url call"+e):(console.log("html.status: "+t.status),console.log("html.message: "+t.message),logger.log("DEB",l,"api","aiBotCallStop HTML Received: "+t)),a(e,o,t)})};